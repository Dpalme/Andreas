<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ANDREAS - Klaatu Suuns</title>
    <!-- Primary Meta Tags -->
    <title>ANDREAS - Klaatu Suuns x Speck Joliet</title>
    <meta name="title" content="ANDREAS - Klaatu Suuns x Speck Joliet" />
    <meta
      name="description"
      content="Watch the new music video for ANDREAS and participate to win a PANORAMAS cassette."
    />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://dpalmer.in/Andreas" />
    <meta property="og:title" content="ANDREAS - Klaatu Suuns x Speck Joliet" />
    <meta
      property="og:description"
      content="Watch the new music video for ANDREAS and participate to win a PANORAMAS cassette."
    />
    <meta
      property="og:image"
      content="https://dpalmer.in/Andreas/img/tabletx675.jpg"
    />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://dpalmer.in/Andreas" />
    <meta
      name="twitter:title"
      content="ANDREAS - Klaatu Suuns x Speck Joliet"
    />
    <meta
      name="twitter:description"
      content="Watch the new music video for ANDREAS and participate to win a PANORAMAS cassette."
    />
    <meta
      name="twitter:image"
      content="https://dpalmer.in/Andreas/img/tabletx675.jpg"
    />
    <link rel="shortcut icon" href="./img/x.svg" type="image/x-icon" />
    <link
      href="https://dpalmer.in/Peoria/css/peoria-0-6-2.min.css"
      rel="stylesheet"
    />
    <link href="./styles.css" rel="stylesheet" />
  </head>
  <body class="overflow-h" v-scope id="body">
    <div class="text-c fade" id="logos">
      <h1>
        <img src="./img/Andreas_Type.svg" alt="Andreas" />
      </h1>
      <div class="flex-row">
        <img src="./img/Klaatu_Type.svg" alt="Klaatu Suuns" class="mr-lg" />
        <img src="./img/Spack_Type.svg" alt="Speck Joliet" />
      </div>
    </div>

    <div class="text-c center-a fade">
      <a href="https://www.youtube.com/watch?v=QnyxhXzLZs8" class="text-c" target="_blank">
        <img src="./img/play_circle_filled.svg" alt="Play Icon" id="playIcon" />
      </a>
    </div>

    <div id="vueComp">
      <form
        class="text-c absolute bottom center-x mb-lg fade"
        id="formName"
        @submit.prevent="strip.getPlant"
      >
        <label for="name" class="white h4"
          >{{ i18b[i18b.lang].formLabel }}</label
        >
        <input
          type="text"
          :placeholder="i18b[i18b.lang].placeholder"
          v-model="name"
          class="small"
          maxlength="15"
        />
      </form>

      <div id="obiStrip" class="top left absolute">
        <div class="text-c p-sm">
          <a class="blue mr-md en-switch" @click="i18b.switchEn">EN</a>
          <a class="blue es-switch" @click="i18b.switchEs">ES</a>
        </div>
        <div class="fixed center-x top white-bg z-1 d-none mr-md">
          <textarea
            class="small blue"
            :value="strip.title"
            rows="5"
            id="altShare"
          ></textarea>
        </div>
        <div id="obiInfo" class="relative">
          <div class="text-c p-sm border-blue relative">
            <h2 class="mb-n">{{ strip.name }}</h2>
            <h3 class="mb-n">{{ strip.plant[i18b.lang].name }}</h3>
          </div>
          <div class="p-sm border-blue">
            <p class="justify mb-n">{{ strip.plant[i18b.lang].info }}</p>
          </div>
          <img
            :src="strip.plant.img.src"
            :alt="strip.plant[i18b.lang].name"
            width="360"
          />
          <div class="text-c p-sm">
            <h3>{{ i18b[i18b.lang].songTitle }}</h3>
            <a
              :href="strip.plant.song.url"
              class="d-block button white blue-bg m-n"
              target="_blank"
            >
              {{ strip.plant.song.name }}
            </a>
          </div>
        </div>
        <div class="text-c p-sm border-blue">
          <p class="mb-sm">{{ i18b[i18b.lang].shareText }}</p>
          <a
            target="_blank"
            class="d-block button white blue-bg m-n"
            :href="strip.tweet"
            >{{ i18b[i18b.lang].shareCTA }}
          </a>
        </div>
        <a href="https://www.youtube.com/watch?v=QnyxhXzLZs8" class="d-block m-n">
          <img src="./img/tabletx675.jpg" alt="" width="360" />
        </a>
      </div>
    </div>

    <footer
      class="absolute bottom right flex-row"
      id="branding"
      style="justify-items: center"
    >
      <a href="https://dpalmer.in">
        <img src="./img/dpalmer_in.svg" alt="dpalmer.in" height="16" />
      </a>
      <img src="./img/x.svg" alt="x" height="16" />
      <a href="https://superartificial.com.mx">
        <img src="./img/SuperArt.svg" alt="Super Artificial" height="16" />
      </a>
    </footer>
    <script src="js/md5.min.js"></script>
    <script type="module">
        import { createApp, reactive } from "https://unpkg.com/petite-vue?module";
        import { plants } from "./js/output.js";

        const strip = reactive({
          plant: {
            es: {
              name: "Nombre español",
              info: "Info español",
            },
            en: {
              name: "Nombre inglés",
              info: "Info inglés ",
            },
            song: {
              name: "Canción ",
              url: "Canción ",
            },
            img: {
              src: "./img/plants/narciso.jpeg",
            },
          },
          tweet: "",
          getPlant(ev) {
            this.name = ev.target[0].value;
            if (this.name && this.name != "") {
              document.getElementById("obiStrip").classList.add("open");
              var hashStr = md5(name.toLowerCase()),
                hash = 0;
              for (var i = 0; i < md5.length; i++) {
                hash += hashStr.charCodeAt(i);
              }
              const keys = Object.keys(plants);
              this.plant = plants[keys[hash % keys.length]];
            }
            
            this.tweet = 'https://twitter.com/intent/tweet?text=';
            if (i18b.lang == "es") {
              this.tweet += encodeURIComponent(`A mí me tocó ${this.plant[i18b.lang].name}, ¿a ti?\n\n#ANDREASMV #KlaatuSuuns\n`);
            } else {
              this.tweet += encodeURIComponent(`I got ${
                this.plant[i18b.lang].name
              }, what did you get?\n\n#ANDREASMV #KlaatuSuuns\n`);
            }
            this.tweet += "&url=" + encodeURIComponent('https://dpalmer.in/Andreas')
          }
        });

        const i18b = reactive({
          lang: "es",
          es: {
            formLabel: "Gana una sorpresa",
            placeholder: "Tu Nombre",
            shareText:
              "Comparte lo que te salió y participa para ganar un cassette de PANORAMAS",
            shareCTA: "Tweet",
            viewCTA: "Ve el video de ANDREAS",
            songTitle: "Tu canción",
          },
          en: {
            formLabel: "Win a surprise",
            placeholder: "Your Name",
            shareText:
              "Share what you got for a chance to win a PANORAMAS cassette",
            shareCTA: "Tweet",
            viewCTA: "Watch the ANDREAS video",
            songTitle: "Your Song",
          },
          switchEn() {
            this.lang = "en";
            document.querySelector(".en-switch").classList.add("active");
            document.querySelector(".es-switch").classList.remove("active");
          },
          switchEs() {
            this.lang = "es";
            document.querySelector(".en-switch").classList.remove("active");
            document.querySelector(".es-switch").classList.add("active");
          },
        });

        createApp({ i18b, strip }).mount("#body");

        if ("es" in window.navigator.languages) {
          i18b.switchEs();
        } else {
          i18b.switchEn();
        }
    </script>
  </body>
</html>
